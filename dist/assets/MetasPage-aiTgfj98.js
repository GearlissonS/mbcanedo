import{r as o,$ as r,j as t}from"./index-BCLwRgkH.js";function j(){const[c,m]=o.useState([]),[u,h]=o.useState([]);o.useEffect(()=>{n()},[]);async function n(){const{data:e}=await r.from("equipes").select("*");m(e||[]);const{data:i}=await r.from("corretores").select("*");h(i||[])}async function p(e,i){await r.from("equipes").update({meta_equipe:i}).eq("id",e),n()}async function g(e,i){await r.from("corretores").update({meta_individual:i}).eq("id",e),n()}function l(e,i){return!i||i===0?0:Math.min(100,(e||0)/i*100)}return t.jsxs("div",{style:{padding:20},children:[t.jsx("h2",{children:"Metas"}),c.map(e=>{const i=u.filter(a=>a.equipe===e.nome).reduce((a,s)=>a+(s.realizado||0),0),d=l(i,e.meta_equipe);return t.jsxs("div",{style:{marginBottom:30},children:[t.jsxs("h3",{children:[e.nome," - Meta da Equipe"]}),t.jsx("input",{type:"number",value:e.meta_equipe||0,onChange:a=>p(e.id,Number(a.target.value))}),t.jsx("div",{style:{background:"#eee",borderRadius:4,height:20,marginTop:5},children:t.jsx("div",{style:{width:`${d}%`,background:d>=100?"green":"blue",height:"100%",borderRadius:4,transition:"width 0.3s ease"}})}),t.jsxs("p",{children:[d.toFixed(1),"% (",i,"/",e.meta_equipe,")"]}),t.jsx("h4",{children:"Corretores"}),u.filter(a=>a.equipe===e.nome).map(a=>{const s=l(a.realizado,a.meta_individual);return t.jsxs("div",{style:{marginBottom:10},children:[t.jsx("strong",{children:a.nome}),t.jsx("input",{type:"number",value:a.meta_individual||0,onChange:x=>g(a.id,Number(x.target.value)),style:{marginLeft:10}}),t.jsx("div",{style:{background:"#eee",borderRadius:4,height:10,marginTop:5},children:t.jsx("div",{style:{width:`${s}%`,background:s>=100?"green":"orange",height:"100%",borderRadius:4,transition:"width 0.3s ease"}})}),t.jsxs("span",{children:[s.toFixed(1),"% (",a.realizado,"/",a.meta_individual,")"]})]},a.id)})]},e.id)})]})}export{j as default};
