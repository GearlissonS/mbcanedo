import{c as w,h as ne,r as i,j as e,i as b,k as ce,af as de,a as m,u as pe,$ as D,a0 as d}from"./index-BCLwRgkH.js";import{C as ue,a as me,b as ge,c as xe}from"./card-uk5sB88G.js";import{b as T,B as N}from"./button-B4dwfKEl.js";import{I as E}from"./index-CW2R06vj.js";import{T as fe,a as he,b as C,c as y,d as ve,e as h}from"./table-BCHcOdEX.js";import{c as R,b as je,O as Ne,W as ye,C as Ae,T as De,D as Ce,a as S,R as we,P as Ee}from"./index-B1Kn2gnC.js";import{C as be}from"./check-B0fch9o3.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=w("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=w("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=w("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var _="AlertDialog",[_e,Ze]=ne(_,[R]),p=R(),P=a=>{const{__scopeAlertDialog:s,...t}=a,o=p(s);return e.jsx(we,{...o,...t,modal:!0})};P.displayName=_;var Pe="AlertDialogTrigger",k=i.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...o}=a,l=p(t);return e.jsx(je,{...l,...o,ref:s})});k.displayName=Pe;var ke="AlertDialogPortal",M=a=>{const{__scopeAlertDialog:s,...t}=a,o=p(s);return e.jsx(Ee,{...o,...t})};M.displayName=ke;var Me="AlertDialogOverlay",O=i.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...o}=a,l=p(t);return e.jsx(Ne,{...l,...o,ref:s})});O.displayName=Me;var v="AlertDialogContent",[Oe,ze]=_e(v),Ie=de("AlertDialogContent"),z=i.forwardRef((a,s)=>{const{__scopeAlertDialog:t,children:o,...l}=a,g=p(t),n=i.useRef(null),j=b(s,n),f=i.useRef(null);return e.jsx(ye,{contentName:v,titleName:I,docsSlug:"alert-dialog",children:e.jsx(Oe,{scope:t,cancelRef:f,children:e.jsxs(Ae,{role:"alertdialog",...g,...l,ref:j,onOpenAutoFocus:ce(l.onOpenAutoFocus,u=>{var x;u.preventDefault(),(x=f.current)==null||x.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[e.jsx(Ie,{children:o}),e.jsx(qe,{contentRef:n})]})})})});z.displayName=v;var I="AlertDialogTitle",$=i.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...o}=a,l=p(t);return e.jsx(De,{...l,...o,ref:s})});$.displayName=I;var q="AlertDialogDescription",F=i.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...o}=a,l=p(t);return e.jsx(Ce,{...l,...o,ref:s})});F.displayName=q;var $e="AlertDialogAction",L=i.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...o}=a,l=p(t);return e.jsx(S,{...l,...o,ref:s})});L.displayName=$e;var H="AlertDialogCancel",B=i.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...o}=a,{cancelRef:l}=ze(H,t),g=p(t),n=b(s,l);return e.jsx(S,{...g,...o,ref:n})});B.displayName=H;var qe=({contentRef:a})=>{const s=`\`${v}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${v}\` by passing a \`${q}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${v}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return i.useEffect(()=>{var o;document.getElementById((o=a.current)==null?void 0:o.getAttribute("aria-describedby"))||console.warn(s)},[s,a]),null},Fe=P,Le=k,He=M,V=O,G=z,W=L,Y=B,J=$,K=F;const Be=Fe,Ve=Le,Ge=He,Q=i.forwardRef(({className:a,...s},t)=>e.jsx(V,{className:m("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t}));Q.displayName=V.displayName;const U=i.forwardRef(({className:a,...s},t)=>e.jsxs(Ge,{children:[e.jsx(Q,{}),e.jsx(G,{ref:t,className:m("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]}));U.displayName=G.displayName;const X=({className:a,...s})=>e.jsx("div",{className:m("flex flex-col space-y-2 text-center sm:text-left",a),...s});X.displayName="AlertDialogHeader";const Z=({className:a,...s})=>e.jsx("div",{className:m("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s});Z.displayName="AlertDialogFooter";const ee=i.forwardRef(({className:a,...s},t)=>e.jsx(J,{ref:t,className:m("text-lg font-semibold",a),...s}));ee.displayName=J.displayName;const ae=i.forwardRef(({className:a,...s},t)=>e.jsx(K,{ref:t,className:m("text-sm text-muted-foreground",a),...s}));ae.displayName=K.displayName;const se=i.forwardRef(({className:a,...s},t)=>e.jsx(W,{ref:t,className:m(T(),a),...s}));se.displayName=W.displayName;const te=i.forwardRef(({className:a,...s},t)=>e.jsx(Y,{ref:t,className:m(T({variant:"outline"}),"mt-2 sm:mt-0",a),...s}));te.displayName=Y.displayName;function ea(){const{settings:a}=pe(),[s,t]=i.useState([]),[o,l]=i.useState(""),[g,n]=i.useState(!1),[j,f]=i.useState(null),[u,x]=i.useState("");i.useEffect(()=>{A()},[]);async function A(){n(!0);const{data:r,error:c}=await D.from("equipes").select("*").order("nome");c?d.error("Erro ao carregar equipes"):t(r||[]),n(!1)}async function re(){const r=o.trim();if(!r)return d.warning("Informe o nome da equipe");n(!0);const{error:c}=await D.from("equipes").insert([{nome:r}]);if(n(!1),c)return d.error("Não foi possível salvar");d.success("Equipe adicionada"),l(""),A()}function oe(r){f(r.id),x(r.nome)}async function ie(){const r=(u||"").trim();if(!r)return d.warning("Nome inválido");n(!0);const{error:c}=await D.from("equipes").update({nome:r}).eq("id",j);if(n(!1),c)return d.error("Falha ao atualizar");d.success("Equipe atualizada"),f(null),x(""),A()}async function le(r){n(!0);const{error:c}=await D.from("equipes").delete().eq("id",r);if(n(!1),c)return d.error("Falha ao excluir");d.success("Equipe excluída"),A()}return e.jsx("div",{className:"p-2",children:e.jsxs(ue,{className:"w-full",children:[e.jsxs(me,{className:"flex flex-row items-center justify-between space-y-0",children:[e.jsx(ge,{children:"Equipes"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(E,{placeholder:"Nova equipe…",value:o,onChange:r=>l(r.target.value),disabled:g,className:"w-56"}),e.jsxs(N,{onClick:re,disabled:g,className:"gap-2",children:[e.jsx(Te,{size:18})," Adicionar"]})]})]}),e.jsx(xe,{children:g&&s.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"Carregando…"}):e.jsxs(fe,{children:[e.jsx(he,{children:e.jsxs(C,{children:[e.jsx(y,{className:"w-[80px]",children:"ID"}),e.jsx(y,{children:"Nome"}),e.jsx(y,{className:"w-[160px]",children:"Criada em"}),e.jsx(y,{className:"w-[140px]",children:"Corretores"}),e.jsx(y,{className:"w-[220px] text-right",children:"Ações"})]})}),e.jsx(ve,{children:s.length===0?e.jsx(C,{children:e.jsx(h,{colSpan:5,className:"text-muted-foreground",children:"Nenhuma equipe cadastrada."})}):s.map(r=>e.jsxs(C,{children:[e.jsx(h,{className:"text-muted-foreground",children:r.id}),e.jsx(h,{children:j===r.id?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{value:u,onChange:c=>x(c.target.value),className:"max-w-sm",autoFocus:!0}),e.jsxs(N,{size:"sm",className:"gap-1",onClick:ie,children:[e.jsx(be,{size:16})," Salvar"]}),e.jsx(N,{size:"sm",variant:"outline",onClick:()=>{f(null),x("")},children:"Cancelar"})]}):e.jsx("span",{className:"font-medium",children:r.nome})}),e.jsx(h,{children:r.created_at?new Date(r.created_at).toLocaleDateString():"—"}),e.jsx(h,{children:Array.isArray(a==null?void 0:a.brokers)?(a.brokers||[]).filter(c=>c.team===r.nome).length:0}),e.jsx(h,{className:"text-right",children:j!==r.id?e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(N,{size:"sm",variant:"secondary",className:"gap-1",onClick:()=>oe(r),children:[e.jsx(Re,{size:16})," Editar"]}),e.jsxs(Be,{children:[e.jsx(Ve,{asChild:!0,children:e.jsxs(N,{size:"sm",variant:"destructive",className:"gap-1",children:[e.jsx(Se,{size:16})," Excluir"]})}),e.jsxs(U,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Excluir equipe"}),e.jsxs(ae,{children:['Tem certeza que deseja excluir "',r.nome,'"? Essa ação não pode ser desfeita.']})]}),e.jsxs(Z,{children:[e.jsx(te,{children:"Cancelar"}),e.jsx(se,{onClick:()=>le(r.id),children:"Excluir"})]})]})]})]}):null})]},r.id))})]})})]})})}export{ea as default};
