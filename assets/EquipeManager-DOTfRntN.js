import{c as E,r as o,j as e,l as C,h as le,n as ne,a4 as ce,a as m,a5 as _,u as de,_ as ue,W as d,B as N,Y as pe,a6 as me,Z as ge}from"./index-CrDTbQSZ.js";import{C as fe,a as xe,b as he,c as ve}from"./card-D74lcG__.js";import{I as w}from"./index-Cq6hf_Pr.js";import{T as Ne,a as je,b as D,c as j,d as ye,e as x}from"./table-CtqTCuFj.js";import{c as b,R as Ae,b as De,P as Ee,W as we,C as Ce,T as _e,D as be,a as R,O as Re}from"./index-BkBn7982.js";import{C as Se}from"./check-C511vp4-.js";/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ke=E("circle-plus",Te);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Pe=E("pen",Me);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],qe=E("trash-2",ze);var S="AlertDialog",[Oe,ra]=le(S,[b]),u=b(),T=s=>{const{__scopeAlertDialog:a,...t}=s,i=u(a);return e.jsx(Ae,{...i,...t,modal:!0})};T.displayName=S;var Ie="AlertDialogTrigger",k=o.forwardRef((s,a)=>{const{__scopeAlertDialog:t,...i}=s,l=u(t);return e.jsx(De,{...l,...i,ref:a})});k.displayName=Ie;var $e="AlertDialogPortal",M=s=>{const{__scopeAlertDialog:a,...t}=s,i=u(a);return e.jsx(Ee,{...i,...t})};M.displayName=$e;var Fe="AlertDialogOverlay",P=o.forwardRef((s,a)=>{const{__scopeAlertDialog:t,...i}=s,l=u(t);return e.jsx(Re,{...l,...i,ref:a})});P.displayName=Fe;var h="AlertDialogContent",[Le,He]=Oe(h),Be=ce("AlertDialogContent"),z=o.forwardRef((s,a)=>{const{__scopeAlertDialog:t,children:i,...l}=s,g=u(t),n=o.useRef(null),v=C(a,n),f=o.useRef(null);return e.jsx(we,{contentName:h,titleName:q,docsSlug:"alert-dialog",children:e.jsx(Le,{scope:t,cancelRef:f,children:e.jsxs(Ce,{role:"alertdialog",...g,...l,ref:v,onOpenAutoFocus:ne(l.onOpenAutoFocus,p=>{p.preventDefault(),f.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[e.jsx(Be,{children:i}),e.jsx(We,{contentRef:n})]})})})});z.displayName=h;var q="AlertDialogTitle",O=o.forwardRef((s,a)=>{const{__scopeAlertDialog:t,...i}=s,l=u(t);return e.jsx(_e,{...l,...i,ref:a})});O.displayName=q;var I="AlertDialogDescription",$=o.forwardRef((s,a)=>{const{__scopeAlertDialog:t,...i}=s,l=u(t);return e.jsx(be,{...l,...i,ref:a})});$.displayName=I;var Ve="AlertDialogAction",F=o.forwardRef((s,a)=>{const{__scopeAlertDialog:t,...i}=s,l=u(t);return e.jsx(R,{...l,...i,ref:a})});F.displayName=Ve;var L="AlertDialogCancel",H=o.forwardRef((s,a)=>{const{__scopeAlertDialog:t,...i}=s,{cancelRef:l}=He(L,t),g=u(t),n=C(a,l);return e.jsx(R,{...g,...i,ref:n})});H.displayName=L;var We=({contentRef:s})=>{const a=`\`${h}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${h}\` by passing a \`${I}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${h}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return o.useEffect(()=>{document.getElementById(s.current?.getAttribute("aria-describedby"))||console.warn(a)},[a,s]),null},Ge=T,Ye=k,Ue=M,B=P,V=z,W=F,G=H,Y=O,U=$;const Ze=Ge,Je=Ye,Ke=Ue,Z=o.forwardRef(({className:s,...a},t)=>e.jsx(B,{className:m("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t}));Z.displayName=B.displayName;const J=o.forwardRef(({className:s,...a},t)=>e.jsxs(Ke,{children:[e.jsx(Z,{}),e.jsx(V,{ref:t,className:m("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a})]}));J.displayName=V.displayName;const K=({className:s,...a})=>e.jsx("div",{className:m("flex flex-col space-y-2 text-center sm:text-left",s),...a});K.displayName="AlertDialogHeader";const Q=({className:s,...a})=>e.jsx("div",{className:m("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});Q.displayName="AlertDialogFooter";const X=o.forwardRef(({className:s,...a},t)=>e.jsx(Y,{ref:t,className:m("text-lg font-semibold",s),...a}));X.displayName=Y.displayName;const ee=o.forwardRef(({className:s,...a},t)=>e.jsx(U,{ref:t,className:m("text-sm text-muted-foreground",s),...a}));ee.displayName=U.displayName;const ae=o.forwardRef(({className:s,...a},t)=>e.jsx(W,{ref:t,className:m(_(),s),...a}));ae.displayName=W.displayName;const se=o.forwardRef(({className:s,...a},t)=>e.jsx(G,{ref:t,className:m(_({variant:"outline"}),"mt-2 sm:mt-0",s),...a}));se.displayName=G.displayName;function oa(){const{settings:s}=de(),[a,t]=o.useState([]),[i,l]=o.useState(""),[g,n]=o.useState(!1),[v,f]=o.useState(null),[p,y]=o.useState("");o.useEffect(()=>{A()},[]);async function A(){n(!0);try{const r=await ue("equipes",{order:"nome"});t(r||[])}catch(r){console.warn("[EquipeManager] carregarEquipes falhou, usando lista vazia.",r),t([]),d.error("Erro ao carregar equipes")}finally{n(!1)}}async function te(){const r=i.trim();if(!r)return d.warning("Informe o nome da equipe");n(!0);try{if(!await pe("equipes",{nome:r}))return d.error("Não foi possível salvar");d.success("Equipe adicionada"),l(""),A()}catch(c){console.warn("[EquipeManager] inserir equipe falhou.",c),d.error("Não foi possível salvar")}finally{n(!1)}}function re(r){f(r.id),y(r.nome)}async function oe(){const r=(p||"").trim();if(!r)return d.warning("Nome inválido");n(!0);try{if(!await me("equipes",v,{nome:r}))return d.error("Falha ao atualizar");d.success("Equipe atualizada"),f(null),y(""),A()}catch(c){console.warn("[EquipeManager] atualizar equipe falhou.",c),d.error("Falha ao atualizar")}finally{n(!1)}}async function ie(r){n(!0);try{if(!await ge("equipes",r))return d.error("Falha ao excluir");d.success("Equipe excluída"),A()}catch(c){console.warn("[EquipeManager] excluir equipe falhou.",c),d.error("Falha ao excluir")}finally{n(!1)}}return e.jsx("div",{className:"p-2",children:e.jsxs(fe,{className:"w-full",children:[e.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0",children:[e.jsx(he,{children:"Equipes"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(w,{placeholder:"Nova equipe…",value:i,onChange:r=>l(r.target.value),disabled:g,className:"w-56"}),e.jsxs(N,{onClick:te,disabled:g,className:"gap-2",children:[e.jsx(ke,{size:18})," Adicionar"]})]})]}),e.jsx(ve,{children:g&&a.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"Carregando…"}):e.jsxs(Ne,{children:[e.jsx(je,{children:e.jsxs(D,{children:[e.jsx(j,{className:"w-[80px]",children:"ID"}),e.jsx(j,{children:"Nome"}),e.jsx(j,{className:"w-[160px]",children:"Criada em"}),e.jsx(j,{className:"w-[140px]",children:"Corretores"}),e.jsx(j,{className:"w-[220px] text-right",children:"Ações"})]})}),e.jsx(ye,{children:a.length===0?e.jsx(D,{children:e.jsx(x,{colSpan:5,className:"text-muted-foreground",children:"Nenhuma equipe cadastrada."})}):a.map(r=>e.jsxs(D,{children:[e.jsx(x,{className:"text-muted-foreground",children:r.id}),e.jsx(x,{children:v===r.id?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{value:p,onChange:c=>y(c.target.value),className:"max-w-sm",autoFocus:!0}),e.jsxs(N,{size:"sm",className:"gap-1",onClick:oe,children:[e.jsx(Se,{size:16})," Salvar"]}),e.jsx(N,{size:"sm",variant:"outline",onClick:()=>{f(null),y("")},children:"Cancelar"})]}):e.jsx("span",{className:"font-medium",children:r.nome})}),e.jsx(x,{children:r.created_at?new Date(r.created_at).toLocaleDateString():"—"}),e.jsx(x,{children:Array.isArray(s?.brokers)?(s.brokers||[]).filter(c=>c.team===r.nome).length:0}),e.jsx(x,{className:"text-right",children:v!==r.id?e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(N,{size:"sm",variant:"secondary",className:"gap-1",onClick:()=>re(r),children:[e.jsx(Pe,{size:16})," Editar"]}),e.jsxs(Ze,{children:[e.jsx(Je,{asChild:!0,children:e.jsxs(N,{size:"sm",variant:"destructive",className:"gap-1",children:[e.jsx(qe,{size:16})," Excluir"]})}),e.jsxs(J,{children:[e.jsxs(K,{children:[e.jsx(X,{children:"Excluir equipe"}),e.jsxs(ee,{children:['Tem certeza que deseja excluir "',r.nome,'"? Essa ação não pode ser desfeita.']})]}),e.jsxs(Q,{children:[e.jsx(se,{children:"Cancelar"}),e.jsx(ae,{onClick:()=>ie(r.id),children:"Excluir"})]})]})]})]}):null})]},r.id))})]})})]})})}export{oa as default};
