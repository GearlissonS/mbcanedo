import{j as e,r as c}from"./index-e-3IlwLF.js";function N({children:v,onClose:r}){return e.jsx("div",{className:"modal-overlay",onClick:r,children:e.jsxs("div",{className:"modal-content",onClick:i=>i.stopPropagation(),children:[e.jsx("button",{className:"modal-close",onClick:r,children:"×"}),v]})})}const f=async()=>[{id:1,cliente:"João Silva",imovel:"Apto 101",corretor:"Maria Souza",valor:35e4,etapa:"Aprovação",dataEntrada:"2025-08-01",status:"Aprovado",contato:{whatsapp:"5511999999999",telefone:"11999999999",email:"joao@email.com"}}],C=["Aprovação","Aguardando Contrato","Contrato Assinado","Aguardando Reserva","Contrato Banco Assinado","Aguardando Conformidade","Finalizado","Distrato"],S=()=>{const[v,r]=c.useState([]),[i,h]=c.useState(""),[m,p]=c.useState(""),[x,u]=c.useState(!1),[t,l]=c.useState({cliente:"",imovel:"",vgv:"",vgc:"",observacao:""});c.useEffect(()=>{f().then(r)},[]);const j=(a,s)=>{a.dataTransfer.setData("cardId",s)},g=(a,s)=>{const d=a.dataTransfer.getData("cardId");r(n=>n.map(o=>o.id===Number(d)?{...o,etapa:s}:o))},b=v.filter(a=>(!i||a.corretor===i)&&(a.cliente.toLowerCase().includes(m.toLowerCase())||a.imovel.toLowerCase().includes(m.toLowerCase())));return e.jsxs("div",{className:"kanban-vendas-container",children:[e.jsxs("div",{className:"kanban-header",children:[e.jsx("input",{type:"text",placeholder:"Buscar por cliente ou imóvel",value:m,onChange:a=>p(a.target.value)}),e.jsxs("select",{value:i,onChange:a=>h(a.target.value),children:[e.jsx("option",{value:"",children:"Todos Corretores"}),[...new Set(v.map(a=>a.corretor))].map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsx("button",{className:"nova-venda-btn",onClick:()=>u(!0),children:"+ Nova Venda"})]}),e.jsx("div",{className:"kanban-board",children:C.map(a=>{const s=b.filter(n=>n.etapa===a),d=s.reduce((n,o)=>n+o.valor,0);return e.jsxs("div",{className:`kanban-column kanban-${a.replace(/\s/g,"-").toLowerCase()}`,onDragOver:n=>n.preventDefault(),onDrop:n=>g(n,a),children:[e.jsxs("div",{className:"kanban-column-header",children:[e.jsx("span",{children:a}),e.jsxs("span",{className:"kanban-count",children:[s.length," vendas"]}),e.jsxs("span",{className:"kanban-total",children:["R$ ",d.toLocaleString()]})]}),e.jsx("div",{className:"kanban-cards",children:s.map(n=>e.jsxs("div",{className:"kanban-card",draggable:!0,onDragStart:o=>j(o,n.id),children:[e.jsxs("div",{className:"kanban-card-header",children:[e.jsx("span",{className:`badge badge-${n.status==="Aprovado"?"green":"red"}`,children:n.status}),e.jsx("span",{className:"kanban-card-date",children:n.dataEntrada})]}),e.jsxs("div",{className:"kanban-card-body",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Cliente:"})," ",n.cliente]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Imóvel:"})," ",n.imovel]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Corretor:"})," ",n.corretor]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Valor:"})," R$ ",n.valor.toLocaleString()]})]}),e.jsxs("div",{className:"kanban-card-footer",children:[e.jsx("a",{href:`https://wa.me/${n.contato.whatsapp}`,target:"_blank",rel:"noopener noreferrer",title:"WhatsApp",children:e.jsx("i",{className:"icon-whatsapp"})}),e.jsx("a",{href:`tel:${n.contato.telefone}`,title:"Telefone",children:e.jsx("i",{className:"icon-phone"})}),e.jsx("a",{href:`mailto:${n.contato.email}`,title:"E-mail",children:e.jsx("i",{className:"icon-mail"})})]})]},n.id))})]},a)})}),x&&e.jsx(N,{onClose:()=>u(!1),children:e.jsxs("form",{className:"modal-form animate-modal",onSubmit:a=>{a.preventDefault();const s=new Date,d={id:Date.now(),cliente:t.cliente,imovel:t.imovel,corretor:"",valor:Number(t.vgv)||0,etapa:"Aprovação",dataEntrada:s.toISOString().slice(0,10),status:"Pendente",contato:{whatsapp:"",telefone:"",email:""},observacao:t.observacao||""};r(n=>[...n,d]),u(!1),l({cliente:"",imovel:"",vgv:"",vgc:"",observacao:""})},children:[e.jsx("h2",{className:"mb-2 text-lg font-bold",children:"Nova Venda"}),e.jsx("input",{required:!0,placeholder:"Cliente",value:t.cliente,onChange:a=>l(s=>({...s,cliente:a.target.value})),className:"input-rounded"}),e.jsx("input",{required:!0,placeholder:"Imóvel",value:t.imovel,onChange:a=>l(s=>({...s,imovel:a.target.value})),className:"input-rounded"}),e.jsx("input",{required:!0,type:"number",placeholder:"VGV",value:t.vgv,onChange:a=>l(s=>({...s,vgv:a.target.value})),className:"input-rounded"}),e.jsx("input",{required:!0,type:"number",placeholder:"VGC",value:t.vgc,onChange:a=>l(s=>({...s,vgc:a.target.value})),className:"input-rounded"}),e.jsx("textarea",{placeholder:"Observação",value:t.observacao,onChange:a=>l(s=>({...s,observacao:a.target.value})),className:"input-rounded",rows:3}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("button",{type:"submit",className:"nova-venda-btn",children:"Salvar"}),e.jsx("button",{type:"button",className:"nova-venda-btn bg-muted text-foreground",onClick:()=>u(!1),children:"Cancelar"})]})]})})]})};export{S as default};
